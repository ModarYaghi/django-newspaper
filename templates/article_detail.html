{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2>{{ object.title }}</h2>
      <p class="text-muted">by {{ object.author }} | {{ object.date }}</p>
      <hr>
      <p>{{ object.body }}</p>
    </div>

    {% if article.comment_set.exists %}
      <div class="card-footer bg-light">
        <h5>üí¨ Comments</h5>
        {% for comment in article.comment_set.all %}
          <p><strong>{{ comment.author }}</strong>: {{ comment }}</p>
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5>Add a Comment</h5>
      <form action="" method="post">
        {% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-success mt-2" type="submit">Post Comment</button>
      </form>
    </div>
  </div>

  {% if article.author.pk == request.user.pk or request.user.is_superuser %}
    <div class="mb-4">
      <a href="{% url 'article_edit' article.pk %}" class="btn btn-outline-secondary">Edit</a>
      <a href="{% url 'article_delete' article.pk %}" class="btn btn-outline-danger ms-2">Delete</a>
    </div>
  {% endif %}
  <a href="{% url 'article_list' %}" class="btn btn-link">‚Üê Back to All Articles</a>
{% endblock %}

